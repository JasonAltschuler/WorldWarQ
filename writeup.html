<HTML>
<HEAD>
<TITLE>
COS 426 Final Project
</TITLE>
<BODY>
<CENTER>
<H2>
COS 426 Final Project, Spring 2014:<BR><BR>
WORLD WAR Q
<BR><BR>
Jason Altschuler, jasonma<BR>
Kyle Dhillon, kdhillon<BR>
Daway-Chou Ren, dchouren<BR>
</H2>                     
</CENTER>
<HR><BR>



<!------------------------------------------------------------------------> 
<!------------------------------------------------------------------------> 
<H2>List of Implemented Features</H2>
<!------------------------------------------------------------------------> 
<!------------------------------------------------------------------------> 

We have implemented the following features:

<ul>
<li><A href="#required"> Required Features: </A>
<ul>

<li><b> 3D perspective viewing and objects </b>
<li><b> Lighting and smooth shading </b>
<li><b> User input </b>
<li><b> Computer control over some elements of the scene </b>
</ul>
</ul>


<ul>
<li><A href="#advancedfeatures"> Advanced Features: </A>
<ul>

<li><b> 1. Texture mapping </b>
<li><b> 2. Multiple views </b>
<li><b> 3. On-screen control panel </b>
<li><b> 4. Procedural and physically-based modeling </b>
<li><b> 5. Collision detection </b>
<li><b> 6. Simulated dynamics </b>
<li><b> 7. Advanced image-based techniques </b>
<li><b> 8. Sound </b>

</ul>
</ul>
<BR>  


<HR>
<!------------------------------------------------------------------------> 
<!------------------------------------------------------------------------> 
<H2>Demonstration of Required Features</H2>
<!------------------------------------------------------------------------> 
<!------------------------------------------------------------------------> 
<HR><BR>
 
<ul>
<ul> 
<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> 3D Perspective Viewing and Objects </A></H3>
<!------------------------------------------------------------------------> 

<TABLE>
<TBODY>

  <TR>

    <TD vAlign=top align=middle>
       <A href="output/3Dperspective_1.gif"><IMG  width=256 src="output/3Dperspective_1.gif"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
    <TD vAlign=top align=middle>
       <A href="output/3Dperspective_2.gif"><IMG width=256  src="output/3Dperspective_2.gif"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD> 
</TR>
<TR>
    <TD vAlign=top align=left colspan="3">
  Description
    </TD>
  </TR>
</TABLE>
</TBODY>

<hr><br>

<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> Lighting and Smooth Shading </A></H3>
<!------------------------------------------------------------------------> 

<TABLE>
<TBODY>
<TR>
    <TD vAlign=top align=middle>
       <A href="output/front.jpg"><IMG  width=256 src="output/front.jpg"></A><BR>  
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
    <TD vAlign=top align=middle>
       <A href="output/back.jpg"><IMG width=256  src="output/back.jpg"></A><BR>    
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD> 
</TR>
<TR>
    <TD vAlign=top align=left colspan="3">
  Description
    </TD>
  </TR>
</TABLE>
</TBODY>

<hr><br>


<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> User Input </A></H3>
<!------------------------------------------------------------------------> 

<TABLE>
<TBODY>
<TR>
    <TD vAlign=top align=middle>
       <A href="output/user_input_1.gif"><IMG  width=256 src="output/user_input_1.gif"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
    <TD vAlign=top align=middle>
       <A href="output/user_input_2.gif"><IMG width=256  src="output/user_input_2.gif"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD> 
</TR>
<TR>
    <TD vAlign=top align=left colspan="3">
  Description
    </TD>
  </TR>
</TABLE>
</TBODY>

<hr><br>


<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> Computer Control </A></H3>
<!------------------------------------------------------------------------> 

<TABLE>
<TBODY>
<TR>
    <TD vAlign=top align=middle>
       <A href="output/computer_control_1.gif"><IMG  width=256 src="output/computer_control_1.gif"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
    <TD vAlign=top align=middle>
       <A href="output/computer_control_2.gif"><IMG width=256  src="output/computer_control_2.gif"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD> 
</TR>
<TR>
    <TD vAlign=top align=left colspan="3">
  Description
    </TD>
  </TR>
</TBODY>
</TABLE>

Comments about the implementation, peculiarities, etc.

<BR><BR>
</ul>
</ul>
<BR>
<HR>
<!------------------------------------------------------------------------> 
<!------------------------------------------------------------------------> 
<H2>Demonstration of Optional Features</H2>
<!------------------------------------------------------------------------> 
<!------------------------------------------------------------------------> 
<HR><BR>


<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> Texture Mapping </A></H3>
<!------------------------------------------------------------------------> 

<TABLE cellSpacing=0 cellPadding=10 border=0>
<TBODY>
  <TR>
    <TD vAlign=top align=middle>
       <A href="output/texture_mapping.jpg"><IMG width=256 src="output/texture_mapping.jpg"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
  </TR>
  <TR>
    <TD vAlign=top align=left colspan="3">
  Texture mapping was attempted by modifying the LoadMaterial call in particleview.cpp. Four textures were used to texture our terrain triangle mesh: snow, dirt, grass, and rock. For "cliffs" in the terrain (steep mesh faces), a rock texture was applied. Otherwise, snow, dirt, and grass were used based on the average vertex height of the mesh face. Texture materials were initialized in Draw().
    </TD>
  </TR>
  </TABLE>
</TBODY>

<hr><br>
<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> Multiple Views </A></H3>
<!------------------------------------------------------------------------> 

TODO: create video of plane turning and moving around in each view. 

<TABLE>
<TBODY>
  <TR>
    <TD vAlign=top align=middle>
       <A href="output/front_view.jpg"><IMG width=256 src="output/front_view.jpg"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
  </TR>
  <TR>
    <TD vAlign=top align=left colspan="3">
    We implemented 5 different views, toggleable by the keys: 1, 2, 3, 4, and 5. <br> <br>
    
    <li><b> '1': Bird's eye view: </b> from above looking down on the aircraft. Can rotate with mouse.
    <li><b> '2': 1st person view: </b> from above and behind the aircraft. Different from '3' in that can see the 
    aircaft below you. Has crosshairs; good for aiming.
    <li><b> '3': 1st person view: </b> from nose of aircraft. Has crosshairs; good for aiming. <br>
    <li><b> '4': 3rd person view: </b> from above and behind the aircraft, but is not at a fixed angle. Adjusts well when aircraft speeds up / slows down or maneuvers left/right/up/down. <br>
    <li><b> '5': Rear view: </b> looking behind, from above and in front of aircraft. Useful when enemies are behind you.
    
    <br><br>
    Implementation: see the method "LoadCamera(... )" in WorldWarQ.cpp and the
    toggle variable: "static int camera_view"
    </TD>
  </TR>
</TABLE>
</TBODY><BR><BR>

<hr><br>

<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> On-Screen Control Panel </A></H3>
<!------------------------------------------------------------------------> 

TODO: create video of heads-up display
<TABLE>
<TBODY>
  <TR>
    <TD vAlign=top align=middle>
       <A href="output/hud.jpg"><IMG width=256 src="output/hud.jpg"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>  
  </TR>
  <TR>
    <TD vAlign=top align=left colspan="3">
    We implemented the following features for our heads-up display: <br> <br>
    
    <li><b> Minimap: </b> on top right of screen. Displays relative location of all aircraft on map. 
        Also displays direction of each aircraft with a triangle. Player is blue, enemies are red.
        Enemies out of the minimap range will be clipped to minimap edges. 
        To implement this, for each enemy aircraft, we calculated displacement in world coordinates from player aircraft.
        Transform this displacement into player aircraft modeling coordinates. Finally, remove least important dimension. Finding direction of enemy planes is similar, but involves additional transformations.
    <br>
    <li><b> Static crosshairs: </b> in viewpoints 2 and 3. Useful for aiming. <br>
    <li><b> Current velocity, thrust percentage, and altitude: </b> on top left of the screen. <br>
    <li><b> Number of kills and deaths: </b> on bottom left of screen <br>
    <li><b> "Respawning in ___ seconds": </b> counts down after you die <br>
    
    <br><br>
    Implementation: see WorldWarQ.cpp
    </TD>
  </TR>
  </TABLE>
</TBODY>

<hr><br>
<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> Procedural Modeling </A></H3>
<!------------------------------------------------------------------------> 

<TABLE>
<TBODY>
  <TR>
    <TD vAlign=top align=middle>
       <A href="output/terrain_1.jpg"><IMG width=256 src="output/terrain_1.jpg"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
  <TD vAlign=top align=middle>
       <A href="output/terrain_2.jpg"><IMG width=256 src="output/terrain_2.jpg"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
  </TR>
  <TR>
    <TD vAlign=top align=left colspan="3">
  We used procedural modeling to generate our terrain. We implemented a version of the diamond-square algorithm. First we used a Python script to generate a flat NxN triangle mesh, where N is a power of 2. From there random heights are generated for the four corners. These four corners are used to interpolate a height value for the center of the mesh, onto which a random value is added. Then the midpoint heights between the four corners are calculated by averaging the two closest corner heights. The algorithm then proceeds recursively through the four quadrants created by the corners, midpoints, and center until every vertex in the mesh has a height. This process generates a terrain with random heights.
    </TD>
  </TR>
</TABLE>
</TBODY>

<hr><br>
<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> Collision Detection </A></H3>
<!------------------------------------------------------------------------> 

<TABLE>
<TBODY>
  <TR>
    <TD vAlign=top align=middle>
       <A href="output/collision_1.gif"><IMG width=256 src="output/collision_1.gif"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
    <TD vAlign=top align=middle>
       <A href="output/collision_2.gif"><IMG width=256 src="output/collision_@.gif"></A><BR>       
       <A href="input/aircraft1.scn">aircraft1.scn</A>
    </TD>
</TR>
<TR>
    <TD vAlign=top align=left colspan="3">

    
   Collisions are used in the following settings: <br> <br>
    
    <li><b> Bullet hits aircraft: </b> aircraft's hitpoints decrease. If hitpoints == 0, explode and respawn. 
    Flash the aircraft red if hit. <br>
    <li><b> Aircraft hits aircraft: </b> both aircrafts explode and respawn. <br>
    <li><b> Aircraft hits ground: </b> aircraft explodes and respawns. <br><br>
    
    Note: the only node in the scene graph is the ground mesh. Everything else is maintained
    separately. <br>
    Note: we don't implement bullet-ground collisions, because with large ground meshes this is expensive. 
    This is an "acceptable hack"
    because once the bullet hits the ground, it goes through it and is no longer visible to the player. 
    Also, bullets have lifetimes of 10 seconds.
    
    <br><br>
    Implementation: see particle.cpp and R3Aircraft.cpp. The collision view is ~2/3 taken from 
    Assignments 3 and 4 code.

    </TD>
  </TR>
</TABLE>
</TBODY>

<hr><br>

<!------------------------------------------------------------------------> 
<H3><A name="requiredfeatures"> Simulated Dynamics </A></H3>
<!------------------------------------------------------------------------> 

<TABLE>
<TBODY>
  <TR>
    <TD vAlign=top align=middle>
       <A href="output/dynamics_1.gif"><IMG width=256 src="output/dynamics_1.gif"></A><BR>             
       <A href="input/aircraft1.scn">aircraft1.scn</A><BR>
    </TD>
  <TD vAlign=top align=middle>
       <A href="output/dynamics_2.gif"><IMG width=256 src="output/dynamics_2.gif"></A><BR>             
       <A href="input/aircraft1.scn">aircraft1.scn</A><BR>
    </TD>
  </TR>
  <TR>
    <TD vAlign=top align=left colspan="3">
    
   The following objects use simulated dynamics: <br> <br>

    We simulate flight by applying a thrust force in the direction the aircraft is facing, and a drag force in the opposite direction. At any constant thrust, the aircraft will eventually reach terminal velocity. The aircraft is controlled by rolling left and right, and pitching up and down.
    There are two modes of simulating aircraft flight dynamics: 
    <li><b> "Easy mode": </b> ensures aircraft's velocity is in the same direction as the aircraft points. This gives the player more control. <br>   
    <li><b> "Hard mode": </b> This implementation is more realistic, and does not ensure velocity is in the direction the aircraft points. This means the aircraft can "drift" if it makes a sharp turn, making control more difficult. <br>
    <li><b> Explosion particles: </b> update with integration techniques from Assignment 4.
    Updates velocity and acceleration with gravity. <br>
    <li><b> Bullet particles: </b> update with integration techniques from Assignment 4.
    Assume no forces on them for efficiency and ease of aiming / gameplay. <br>
    
    <br>
    Note: no inter-particle forces are used because masses are negligible.
    
    <br><br>
    Implementation: see particle.cpp and R3Aircraft.cpp
    
    </TD>
  </TR>
</TBODY>
</TABLE>

<HR><BR>
<HR><BR>

<!------------------------------------------------------------------------> 
<!------------------------------------------------------------------------> 
<H2>Miscellaneous comments</H2>
<!------------------------------------------------------------------------> 
<!------------------------------------------------------------------------> 


1. Scene file format for "aircraft"
2. Flash when hit


<!------------------------------------------------------------------------> 

</BODY>
</HTML>
